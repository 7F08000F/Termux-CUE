# Termux CUE

这是一个专为在 Termux 安卓终端环境下设计的纯命令行 CUE 整轨音频分割工具。经过多次迭代和严格的错误修正，此版本达到了功能完整、运行稳定的最终状态。

## ✨ 功能特性

- **高性能与高可靠性**:
    - **智能并发**: 程序自动启用最高效的并发模式。处理多个专辑时，自动并行处理专辑；处理单个专辑时，自动并行分割其下的音轨。
    - **确保时长正确**: 程序默认并强制对所有分割出的音轨进行重编码，从根本上解决了因音频流直接复制 (`-c copy`) 可能导致的播放时长不正确的问题。

- **强大的兼容性**:
    - **原生读取内嵌 CUE**: [核心功能] 完全使用 Python `mutagen` 库原生读取 FLAC 文件中的内嵌 CUE 表，支持**官方标准 (`CUESHEET` 块)**和**非标准 (`CUESHEET` 文本标签)**两种格式，不再依赖任何外部命令，稳定可靠。
    - **智能音频匹配**: 当 CUE 表指向的音频文件不存在时，会自动在同目录下寻找并匹配同名的整轨音频文件。
    - **多编码支持**: 能自动尝试以多种编码（UTF-8, GBK, Shift_JIS）读取 `.cue` 文件，最大限度避免乱码。

- **简洁的用户体验**:
    - **全自动处理**: 用户只需选择要处理的任务，程序将全自动完成所有分割和标签写入，无任何中间打断。
    - **稳定的终端交互**: [核心修复] 通过重定向子进程输入流和重置终端状态，根除了在并发处理后可能出现的终端无响应问题。
    - **清晰的错误日志**: 所有在处理过程中发生的错误，都会被详细记录到项目根目录下的 `cue_splitter_error.log` 文件中，便于排查。

- **严格的标签写入**:
    - 使用 `mutagen` 库为分割出的文件写入精确的 ID3v2 (MP3) 或 Vorbis Comment (FLAC) 标签。
    - **忠实写入**: 能够正确读取并写入 CUE 文件中已有的**专辑 ReplayGain** 和 **音轨 ReplayGain** 标签。

## 🚀 部署与运行指南

### 步骤 1: 安装 Termux 和基础环境

1.  从 F-Droid 或 GitHub 安装最新版的 Termux。
2.  打开 Termux，更新软件包列表：`pkg update && pkg upgrade`

### 步骤 2: 安装核心依赖

本项目现在仅需要 `python` 和 `ffmpeg`。

```bash
pkg install python ffmpeg
